<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Time Travel Marketplace – Ultimate Prototype</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: black;
      color: #0f0;
      font-family: 'Courier New', monospace;
      overflow: hidden;
    }
    #boot-screen, #shutdown-screen {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-size: 1.2rem;
    }
    .sequence-line {
      margin: 2px 0;
    }
    .highlight {
      color: yellow;
      font-weight: bold;
    }
    button {
      padding: 0.5rem 1rem;
      font-family: monospace;
      background: #111;
      color: #0f0;
      border: 1px solid #0f0;
      cursor: pointer;
    }
    button:hover {
      background: #0f0;
      color: #111;
    }
    input {
      padding: 0.5rem;
      margin-top: 10px;
      background: #111;
      color: #0f0;
      border: 1px solid #0f0;
    }
    #travel-mode {
      position: absolute;
      bottom: 10px;
      display: flex;
      gap: 10px;
    }
    .media-embed {
      margin-top: 10px;
      border: 1px solid #0f0;
      width: 640px;
      height: 360px;
    }
  </style>
</head>
<body>

<div id="boot-screen">
  <div id="sequence"></div>
  <div id="user-signup">
    <label>Enter your name to join the timeline experience:</label>
    <input type="text" id="userName" placeholder="Anon" />
    <button onclick="signUp()">Join</button>
  </div>
  <div id="travel-mode">
    <button onclick="setMode('wormhole')">Wormhole</button>
    <button onclick="setMode('chrono')">Chrono-Jump</button>
    <button onclick="setMode('teleport')">Teleport</button>
    <button onclick="setMode('parody')">Parody</button>
  </div>
</div>

<div id="shutdown-screen" style="display:none;">
  <div>Shutting down sequence...</div>
  <div id="next-scene" style="margin-top:20px;"></div>
</div>

<script>
const timeline = [
  { year: '13.8B BC', event: 'Big Bang – Universe begins', media: null, parody: false },
  { year: '4.5B BC', event: 'Earth forms – Oh that said BANG!', media: null, parody: true },
  { year: '230M BC', event: 'Dinosaurs roam the Earth', media: 'https://www.youtube.com/watch?v=suZE-dzuS_M', parody: false },
  { year: '66M BC', event: 'Asteroid hits – Dinosaurs extinct', media: null, parody: false },
  { year: '2.5M BC', event: 'Early humans emerge', media: null, parody: false },
  { year: '44 BC', event: 'Julius Caesar assassinated', media: null, parody: false },
  { year: '1605', event: 'Gunpowder Plot – Guy Fawkes scene', media: 'https://www.youtube.com/watch?v=myJ6OFgBk6I', parody: true },
  { year: '1969', event: 'First moon landing', media: null, parody: false },
  { year: '1980', event: 'We Didn\'t Start the Fire', media: 'https://www.youtube.com/watch?v=eFTLKWw542g', parody: true },
  { year: '1990s', event: 'Rave culture explodes', media: null, parody: false },
  { year: '1991', event: 'HTML invention – peek at the code', media: null, parody: false },
  { year: '2020', event: 'Modern era – inclusion of Anon', media: null, parody: false }
];

let sequenceIndex = 0;
let travelMode = 'wormhole';
let user = 'Anon';

function setMode(mode) {
  travelMode = mode;
  addLine(`Travel mode set to: ${mode.toUpperCase()}`);
}

function addLine(text) {
  const sequenceDiv = document.getElementById('sequence');
  const line = document.createElement('div');
  line.className = 'sequence-line';
  line.textContent = text;
  sequenceDiv.appendChild(line);
  sequenceDiv.scrollTop = sequenceDiv.scrollHeight;
}

function displayMedia(media) {
  if (!media) return;
  const sequenceDiv = document.getElementById('sequence');
  const embed = document.createElement('div');
  embed.className = 'media-embed';
  embed.innerHTML = `<iframe width="640" height="360" src="${media}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
  sequenceDiv.appendChild(embed);
  sequenceDiv.scrollTop = sequenceDiv.scrollHeight;
}

function startSequence() {
  if (sequenceIndex >= timeline.length) {
    startShutdown();
    return;
  }

  const item = timeline[sequenceIndex];
  let text = `${item.year}: ${item.event}`;
  if (item.parody) text += ' [Parody Event]';
  if (item.media) text += ` [Media available]`;

  // Include user's name in sequence
  text += ` [${user}]`;

  addLine(text);
  displayMedia(item.media);

  let delay = 2000;
  if (travelMode === 'wormhole') delay = 1500;
  if (travelMode === 'chrono') delay = 1000;
  if (travelMode === 'teleport') delay = 1200;
  if (travelMode === 'parody') delay = 800;

  sequenceIndex++;
  setTimeout(startSequence, delay);
}

function signUp() {
  const input = document.getElementById('userName').value;
  if (input.trim()) user = input.trim();
  document.getElementById('user-signup').style.display = 'none';
  startSequence();
}

function startShutdown() {
  document.getElementById('boot-screen').style.display = 'none';
  const shutdownDiv = document.getElementById('shutdown-screen');
  shutdownDiv.style.display = 'flex';

  let shutdownSteps = [
    'Saving timeline state...',
    'Locking historical events...',
    'Compressing media assets...',
    'Preparing next scene...',
    'Shutdown complete. Credits: Alice – Creator, Anon – Witness, Parody Easter Eggs – Everywhere'
  ];
  let idx = 0;

  function nextStep() {
    if (idx >= shutdownSteps.length) {
      document.getElementById('next-scene').textContent = '>>> Next Scene Ready <<<';
      return;
    }
    let stepLine = document.createElement('div');
    stepLine.textContent = shutdownSteps[idx];
    shutdownDiv.appendChild(stepLine);
    idx++;
    setTimeout(nextStep, 1000);
  }
  nextStep();
}

// Exit dialog
window.onbeforeunload = function(e) {
  e.preventDefault();
  e.returnValue = 'Are you sure you want to leave? The timeline will rewind rapidly!';
};
</script>
</body>
</html>
