<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Main Frame â€” Music-Synced Parody Sequence</title>
<style>
  body { margin:0; font-family:monospace; background:#000; color:#fff; display:flex; height:100vh; }
  #preview { flex:2; display:flex; justify-content:center; align-items:center; background:#000; position:relative; overflow:hidden; }
  #side-code { flex:1; padding:1rem; background:#111; color:#0f0; overflow:auto; font-size:0.85rem; white-space:pre-wrap; }
  .stage { position:absolute; top:0; left:0; width:100%; height:100%; display:flex; justify-content:center; align-items:center; text-align:center; padding:2rem; box-sizing:border-box; opacity:0; transition: opacity 1s ease-in-out; }
  .active { opacity:1; }
  .win95-container { background:#808080; }
  .mac-container { background:#c0c0c0; }
  .nokia-container { background:#0d121c; color:#fff; }
  .linux-container { background:#000; color:#fff; }
  button { cursor:pointer; margin:0.5rem; }
</style>
</head>
<body>

<div id="preview">
  <div class="stage win95-container active" id="windows-stage">
    <div>An Error Has Occurred</div>
    <p>We've detected a critical flaw in the system architecture. It seems you've stumbled upon a satire shop.</p>
    <p>Please do not try to make sense of this. We all lose in the end.</p>
  </div>

  <div class="stage mac-container" id="mac-stage">
    <p>Mac parody with icons and progress bar...</p>
  </div>

  <div class="stage nokia-container" id="nokia-stage">
    <h2>! SEIZURE WARNING</h2>
    <p>Flashing lights and animations ahead.</p>
    <button id="nokia-continue-btn">CONTINUE</button>
    <button onclick="window.location.href='https://www.google.com';">EXIT</button>
  </div>

  <div class="stage linux-container" id="linux-stage">
    <p>Linux final boss: Tux the Penguin</p>
    <button id="linux-hug-btn">HUG</button>
  </div>

  <audio id="bgMusic" src="toccata_fugue_d_minor.mp3" autoplay></audio>
</div>

<div id="side-code">
Sequential parody stages now fade in/out in sync with the music, keeping the screen clear and visually similar to the original.

<script>
  const audio = document.getElementById('bgMusic');
  const stages = [
    document.getElementById('windows-stage'),
    document.getElementById('mac-stage'),
    document.getElementById('nokia-stage'),
    document.getElementById('linux-stage')
  ];
  const stageTimes = [0, 20, 40, 60]; // adjust to fit Toccata and Fugue timing

  function showStage(index) {
    stages.forEach((stage, i) => stage.classList.toggle('active', i === index));
  }

  function scheduler() {
    const t = audio.currentTime;
    for (let i = stageTimes.length - 1; i >= 0; i--) {
      if (t >= stageTimes[i]) {
        showStage(i);
        break;
      }
    }
    requestAnimationFrame(scheduler);
  }

  audio.addEventListener('play', () => scheduler());

  document.getElementById('nokia-continue-btn').addEventListener('click', () => {
    alert('Proceeding to the next parody stage in sync with music...');
  });

  document.getElementById('linux-hug-btn').addEventListener('click', () => {
    alert('Penguin hugged! Returning to homepage.');
    window.location.href = 'homepage.html';
  });
</script>
</div>

</body>
</html>
