<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Time Travel Marketplace Prototype</title>
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet">
<style>
  body, html {
    margin:0; padding:0; width:100%; height:100%; font-family: 'Courier Prime', monospace;
    background:#0d0d0d; color:#e6e6e6; display:flex; justify-content:center; align-items:center;
    overflow:hidden;
  }
  .stage { position:absolute; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; opacity:0; transition:opacity 1s; }
  .active { opacity:1; }
  button { margin:1em; padding:0.5em 1em; cursor:pointer; }
  video, img, iframe { max-width:80%; }
</style>
</head>
<body>

<!-- ENIGMA STAGE -->
<div id="enigma-stage" class="stage active">
  <p>*** DECODING MESSAGE ***</p>
  <p>Press any key to continue...</p>
</div>

<!-- DOS STAGE -->
<div id="dos-stage" class="stage">
  <p>C:\> LOADING TIMETRAVEL.EXE</p>
  <p>Press any key to continue...</p>
</div>

<!-- Windows 3.1 STAGE -->
<div id="win31-stage" class="stage">
  <div>Windows 3.1 Booting...</div>
  <div style="width:300px;height:15px;background:#fff;border:1px solid #000;"><div id="win31-progress-fill" style="height:100%;background:#000084;"></div></div>
</div>

<!-- BSOD STAGE -->
<div id="bsod-stage" class="stage" style="background:#808080; color:#000;">
  <p style="color:#000084;font-weight:bold;">An Error Has Occurred</p>
  <p>We've detected a critical flaw. This is satire. Press any key to continue.</p>
</div>

<!-- Windows XP STAGE -->
<div id="winxp-stage" class="stage" style="background:#004d80;color:#fff;">
  <img src="https://upload.wikimedia.org/wikipedia/commons/0/00/Windows_XP_logo_2001.svg" alt="Windows XP Logo">
  <div>Windows XP Booting...</div>
  <div style="width:300px;height:15px;background:#4b4b4b;border:1px solid #000;"><div id="winxp-progress-fill" style="height:100%;background:#00bfff;"></div></div>
</div>

<!-- FOX PARODY STAGE -->
<div id="fox-stage" class="stage" style="background:#000;color:#fff;">
  <h2>20TH CENTURY FICTION</h2>
  <button id="fox-continue-btn">Continue</button>
</div>

<!-- MAC PARODY STAGE -->
<div id="mac-stage" class="stage" style="background:#c0c0c0;color:#000;">
  <video id="mac-video" autoplay loop muted playsinline>
    <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
    Your browser does not support HTML5 video. This isn’t intentional but at least it’s archived.
  </video>
  <div>Welcome to The Time Travel Marketplace</div>
  <button id="mac-continue-btn">Continue</button>
</div>

<!-- RAVE ERA STAGE -->
<div id="rave-era-stage" class="stage" style="background:#0d0d0d;color:#0f0;">
  <div>The Rave & Electronic Music Era</div>
  <iframe id="mixcloud-embed" width="100%" height="120" src="" frameborder="0" style="display:none;"></iframe>
  <p id="mixcloud-placeholder">Loading the musical time portal...</p>
  <button id="rave-continue-btn">Next Era</button>
</div>

<!-- LINUX FINAL STAGE -->
<div id="linux-stage" class="stage">
  <img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg" alt="Tux the Penguin">
  <p>You have defeated the final boss. All it wanted was a hug.</p>
  <button id="linux-continue-btn">HUG</button>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const stages=['enigma-stage','dos-stage','win31-stage','bsod-stage','winxp-stage','fox-stage','mac-stage','rave-era-stage','linux-stage'];
  let current=0;

  function nextStage(){
    if(current<stages.length-1){
      document.getElementById(stages[current]).classList.remove('active');
      current++;
      const next=document.getElementById(stages[current]);
      next.classList.add('active');
      runStageLogic(next.id);
    }
  }

  function runStageLogic(id){
    switch(id){
      case 'win31-stage':
        fillProgress('win31-progress-fill',1000,100,true);
        break;
      case 'winxp-stage':
        fillProgress('winxp-progress-fill',2000,100,true);
        break;
      case 'mac-stage':
        const vid=document.getElementById('mac-video');
        vid.play().catch(()=>{console.log("Video fallback text will show.");});
        break;
      case 'rave-era-stage':
        const iframe=document.getElementById('mixcloud-embed');
        iframe.src="https://www.mixcloud.com/widget/iframe/?feed=%2FTheMusicalMaitreD%2F&autoplay=1";
        iframe.style.display='block';
        document.getElementById('mixcloud-placeholder').style.display='none';
        break;
    }
  }

  function fillProgress(id,duration,steps,autoNext){
    const bar=document.getElementById(id);
    let progress=0;
    const interval=setInterval(()=>{
      progress+=100/steps;
      if(progress>=100){progress=100; clearInterval(interval); if(autoNext)setTimeout(nextStage,500);}
      bar.style.width=progress+'%';
    },duration/steps);
  }

  // Key and button events
  document.addEventListener('keydown',nextStage);
  stages.forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.addEventListener('click',nextStage);
  });
  document.getElementById('fox-continue-btn').addEventListener('click',nextStage);
  document.getElementById('mac-continue-btn').addEventListener('click',nextStage);
  document.getElementById('rave-continue-btn').addEventListener('click',nextStage);
  document.getElementById('linux-continue-btn').addEventListener('click',()=>{alert("Congratulations! You've completed the prototype.");});
});
</script>

</body>
</html>